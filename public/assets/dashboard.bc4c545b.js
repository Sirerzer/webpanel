(window.webpackJsonp = window.webpackJsonp || []).push([[4], { 412: function (e, t, a) { "use strict"; a.r(t); var n = a(0), i = a.n(n), r = a(28), o = a(283), c = a(1), l = a(253), s = a(53), m = a(27), d = a(17), p = a(175), u = a(177), y = a(24), w = a(34), g = a.n(w); const b = (e, t) => t > 0 && e / (1024 * t * 1024) >= .9, h = Object(n.memo)(Object(c.c)(s.a).withConfig({ displayName: "ServerRow__Icon", componentId: "sc-1ibsw91-0" })(["", ";"], (e => e.$alarm ? { "--tw-text-opacity": "1", color: "rgba(248, 113, 113, var(--tw-text-opacity))" } : { "--tw-text-opacity": "1", color: "hsla(211, 12%, 43%, var(--tw-text-opacity))" })), g.a), f = c.c.p.withConfig({ displayName: "ServerRow__IconDescription", componentId: "sc-1ibsw91-1" })(["", ";", ";"], { fontSize: "0.875rem", lineHeight: "1.25rem", marginLeft: "0.5rem" }, (e => e.$alarm ? { "--tw-text-opacity": "1", color: "rgba(255, 255, 255, var(--tw-text-opacity))" } : { "--tw-text-opacity": "1", color: "hsla(211, 10%, 53%, var(--tw-text-opacity))" })), v = Object(c.c)(u.a).withConfig({ displayName: "ServerRow__StatusIndicatorBox", componentId: "sc-1ibsw91-2" })(["", ";& .status-bar{", ";height:calc(100% - 0.5rem);", ";}&:hover .status-bar{", ";}"], { display: "grid", gridTemplateColumns: "repeat(12, minmax(0, 1fr))", gap: "1rem", position: "relative" }, { width: "0.5rem", "--tw-bg-opacity": "1", backgroundColor: "rgba(239, 68, 68, var(--tw-bg-opacity))", position: "absolute", right: "0px", zIndex: "20", borderRadius: "9999px", margin: "0.25rem", opacity: "0.5", transitionProperty: "all", transitionTimingFunction: "cubic-bezier(0.4, 0, 0.2, 1)", transitionDuration: "150ms" }, (e => { let { $status: t } = e; return t && "offline" !== t ? "running" === t ? { "--tw-bg-opacity": "1", backgroundColor: "rgba(16, 185, 129, var(--tw-bg-opacity))" } : { "--tw-bg-opacity": "1", backgroundColor: "rgba(245, 158, 11, var(--tw-bg-opacity))" } : { "--tw-bg-opacity": "1", backgroundColor: "rgba(239, 68, 68, var(--tw-bg-opacity))" } }), { opacity: "0.75" }); var _ = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv", componentId: "sc-1ibsw91-3" })({ gridColumn: "span 12 / span 12", display: "flex", alignItems: "center", "@media (min-width: 640px)": { gridColumn: "span 5 / span 5" }, "@media (min-width: 1024px)": { gridColumn: "span 6 / span 6" } }), S = Object(c.c)("p").withConfig({ displayName: "ServerRow___StyledP", componentId: "sc-1ibsw91-4" })({ fontSize: "1.125rem", lineHeight: "1.75rem", overflowWrap: "break-word" }), x = Object(c.c)("p").withConfig({ displayName: "ServerRow___StyledP2", componentId: "sc-1ibsw91-5" })({ fontSize: "0.875rem", lineHeight: "1.25rem", "--tw-text-opacity": "1", color: "hsla(211, 13%, 65%, var(--tw-text-opacity))", overflowWrap: "break-word", overflow: "hidden", display: "-webkit-box", WebkitBoxOrient: "vertical", WebkitLineClamp: "2" }), E = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv2", componentId: "sc-1ibsw91-6" })({ flex: "1 1 0%", marginLeft: "1rem", display: "none", "@media (min-width: 1024px)": { gridColumn: "span 2 / span 2", display: "block" } }), j = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv3", componentId: "sc-1ibsw91-7" })({ display: "flex", justifyContent: "center" }), C = Object(c.c)(s.a).withConfig({ displayName: "ServerRow___StyledFontAwesomeIcon", componentId: "sc-1ibsw91-8" })({ "--tw-text-opacity": "1", color: "hsla(211, 12%, 43%, var(--tw-text-opacity))" }), O = Object(c.c)("p").withConfig({ displayName: "ServerRow___StyledP3", componentId: "sc-1ibsw91-9" })({ fontSize: "0.875rem", lineHeight: "1.25rem", "--tw-text-opacity": "1", color: "hsla(211, 10%, 53%, var(--tw-text-opacity))", marginLeft: "0.5rem" }), I = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv4", componentId: "sc-1ibsw91-10" })({ gridColumn: "span 7 / span 7", display: "none", alignItems: "baseline", justifyContent: "center", "@media (min-width: 640px)": { display: "flex" }, "@media (min-width: 1024px)": { gridColumn: "span 4 / span 4" } }), k = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv5", componentId: "sc-1ibsw91-11" })({ flex: "1 1 0%", textAlign: "center" }), N = Object(c.c)("span").withConfig({ displayName: "ServerRow___StyledSpan", componentId: "sc-1ibsw91-12" })({ "--tw-bg-opacity": "1", backgroundColor: "rgba(239, 68, 68, var(--tw-bg-opacity))", borderRadius: "0.25rem", paddingLeft: "0.5rem", paddingRight: "0.5rem", paddingTop: "0.25rem", paddingBottom: "0.25rem", "--tw-text-opacity": "1", color: "rgba(254, 226, 226, var(--tw-text-opacity))", fontSize: "0.75rem", lineHeight: "1rem" }), R = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv6", componentId: "sc-1ibsw91-13" })({ flex: "1 1 0%", textAlign: "center" }), D = Object(c.c)("span").withConfig({ displayName: "ServerRow___StyledSpan2", componentId: "sc-1ibsw91-14" })({ "--tw-bg-opacity": "1", backgroundColor: "hsla(211, 12%, 43%, var(--tw-bg-opacity))", borderRadius: "0.25rem", paddingLeft: "0.5rem", paddingRight: "0.5rem", paddingTop: "0.25rem", paddingBottom: "0.25rem", "--tw-text-opacity": "1", color: "hsla(214, 15%, 91%, var(--tw-text-opacity))", fontSize: "0.75rem", lineHeight: "1rem" }), P = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv7", componentId: "sc-1ibsw91-15" })({ flex: "1 1 0%", marginLeft: "1rem", display: "none", "@media (min-width: 640px)": { display: "block" } }), z = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv8", componentId: "sc-1ibsw91-16" })({ display: "flex", justifyContent: "center" }), T = Object(c.c)("p").withConfig({ displayName: "ServerRow___StyledP4", componentId: "sc-1ibsw91-17" })({ fontSize: "0.75rem", lineHeight: "1rem", "--tw-text-opacity": "1", color: "hsla(209, 14%, 37%, var(--tw-text-opacity))", textAlign: "center", marginTop: "0.25rem" }), B = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv9", componentId: "sc-1ibsw91-18" })({ flex: "1 1 0%", marginLeft: "1rem", display: "none", "@media (min-width: 640px)": { display: "block" } }), U = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv10", componentId: "sc-1ibsw91-19" })({ display: "flex", justifyContent: "center" }), H = Object(c.c)("p").withConfig({ displayName: "ServerRow___StyledP5", componentId: "sc-1ibsw91-20" })({ fontSize: "0.75rem", lineHeight: "1rem", "--tw-text-opacity": "1", color: "hsla(209, 14%, 37%, var(--tw-text-opacity))", textAlign: "center", marginTop: "0.25rem" }), $ = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv11", componentId: "sc-1ibsw91-21" })({ flex: "1 1 0%", marginLeft: "1rem", display: "none", "@media (min-width: 640px)": { display: "block" } }), A = Object(c.c)("div").withConfig({ displayName: "ServerRow___StyledDiv12", componentId: "sc-1ibsw91-22" })({ display: "flex", justifyContent: "center" }), L = Object(c.c)("p").withConfig({ displayName: "ServerRow___StyledP6", componentId: "sc-1ibsw91-23" })({ fontSize: "0.75rem", lineHeight: "1rem", "--tw-text-opacity": "1", color: "hsla(209, 14%, 37%, var(--tw-text-opacity))", textAlign: "center", marginTop: "0.25rem" }), F = a(57), W = a(153), J = a(2), K = a(255), q = a(204), G = a(174), M = a(256), Q = () => { const { search: e } = Object(r.g)(), t = Number(new URLSearchParams(e).get("page") || "1"), [a, o] = Object(n.useState)(!isNaN(t) && t > 0 ? t : 1), { clearFlashes: c, clearAndAddHttpError: s } = Object(W.a)(), m = Object(J.useStoreState)((e => e.user.data.uuid)), d = Object(J.useStoreState)((e => e.user.data.rootAdmin)), [p, u] = Object(K.a)("".concat(m, ":show_all_servers"), !1), { data: w, error: g } = Object(G.a)(["/api/client/servers", p && d, a], (() => Object(l.a)({ page: a, type: p && d ? "admin" : void 0 }))); return Object(n.useEffect)((() => { w && w.pagination.currentPage > 1 && !w.items.length && o(1) }), [null == w ? void 0 : w.pagination.currentPage]), Object(n.useEffect)((() => { window.history.replaceState(null, document.title, "/".concat(a <= 1 ? "" : "?page=".concat(a))) }), [a]), Object(n.useEffect)((() => { g && s({ key: "dashboard", error: g }), g || c("dashboard") }), [g]), i.a.createElement(F.a, { title: "Dashboard", showFlashKey: "dashboard" }, d && i.a.createElement(V, null, i.a.createElement(X, null, p ? "Showing others' servers" : "Showing your servers"), i.a.createElement(q.a, { name: "show_all_servers", defaultChecked: p, onChange: () => u((e => !e)) })), w ? i.a.createElement(M.a, { data: w, onPageSelect: o }, (e => { let { items: t } = e; return t.length > 0 ? t.map(((e, t) => i.a.createElement(Y, { key: e.uuid, server: e, $_css: t > 0 ? { marginTop: "0.5rem" } : void 0 }))) : i.a.createElement(Z, null, p ? "There are no other servers to display." : "There are no servers associated with your account.") })) : i.a.createElement(y.a, { centered: !0, size: "large" })) }, V = Object(c.c)("div").withConfig({ displayName: "DashboardContainer___StyledDiv", componentId: "sc-1topkxf-0" })({ marginBottom: "0.5rem", display: "flex", justifyContent: "flex-end", alignItems: "center" }), X = Object(c.c)("p").withConfig({ displayName: "DashboardContainer___StyledP", componentId: "sc-1topkxf-1" })({ textTransform: "uppercase", fontSize: "0.75rem", lineHeight: "1rem", "--tw-text-opacity": "1", color: "hsla(211, 10%, 53%, var(--tw-text-opacity))", marginRight: "0.5rem" }), Y = Object(c.c)((e => { let { server: t, className: a } = e; const o = Object(n.useRef)(null), [c, l] = Object(n.useState)("suspended" === t.status), [u, w] = Object(n.useState)(null), g = () => (e => new Promise(((t, a) => { d.a.get("/api/client/servers/".concat(e, "/resources")).then((e => { let { data: { attributes: a } } = e; return t({ status: a.current_state, isSuspended: a.is_suspended, memoryUsageInBytes: a.resources.memory_bytes, cpuUsagePercent: a.resources.cpu_absolute, diskUsageInBytes: a.resources.disk_bytes, networkRxInBytes: a.resources.network_rx_bytes, networkTxInBytes: a.resources.network_tx_bytes, uptime: a.resources.uptime }) })).catch(a) })))(t.uuid).then((e => w(e))).catch((e => console.error(e))); Object(n.useEffect)((() => { l((null == u ? void 0 : u.isSuspended) || "suspended" === t.status) }), [null == u ? void 0 : u.isSuspended, t.status]), Object(n.useEffect)((() => { if (!c) return g().then((() => { o.current = setInterval((() => g()), 3e4) })), () => { o.current && clearInterval(o.current) } }), [c]); const F = { cpu: !1, memory: !1, disk: !1 }; u && (F.cpu = 0 !== t.limits.cpu && u.cpuUsagePercent >= .9 * t.limits.cpu, F.memory = b(u.memoryUsageInBytes, t.limits.memory), F.disk = 0 !== t.limits.disk && b(u.diskUsageInBytes, t.limits.disk)); const W = 0 !== t.limits.disk ? Object(p.a)(Object(p.c)(t.limits.disk)) : "Unlimited", J = 0 !== t.limits.memory ? Object(p.a)(Object(p.c)(t.limits.memory)) : "Unlimited", K = 0 !== t.limits.cpu ? t.limits.cpu + " %" : "Unlimited"; return i.a.createElement(v, { as: r.a, to: "/server/".concat(t.id), className: a, $status: null == u ? void 0 : u.status }, i.a.createElement(_, null, i.a.createElement("div", { className: "icon mr-4" }, i.a.createElement(s.a, { icon: m.J })), i.a.createElement("div", null, i.a.createElement(S, null, t.name), !!t.description && i.a.createElement(x, null, t.description))), i.a.createElement(E, null, i.a.createElement(j, null, i.a.createElement(C, { icon: m.p }), i.a.createElement(O, null, t.allocations.filter((e => e.isDefault)).map((e => i.a.createElement(i.a.Fragment, { key: e.ip + e.port.toString() }, e.alias || Object(p.b)(e.ip), ":", e.port)))))), i.a.createElement(I, null, !u || c ? c ? i.a.createElement(k, null, i.a.createElement(N, null, "suspended" === t.status ? "Suspended" : "Connection Error")) : t.isTransferring || t.status ? i.a.createElement(R, null, i.a.createElement(D, null, t.isTransferring ? "Transferring" : "installing" === t.status ? "Installing" : "restoring_backup" === t.status ? "Restoring Backup" : "Unavailable")) : i.a.createElement(y.a, { size: "small" }) : i.a.createElement(i.a.Fragment, null, i.a.createElement(P, null, i.a.createElement(z, null, i.a.createElement(h, { icon: m.F, $alarm: F.cpu }), i.a.createElement(f, { $alarm: F.cpu }, u.cpuUsagePercent.toFixed(2), " %")), i.a.createElement(T, null, "of ", K)), i.a.createElement(B, null, i.a.createElement(U, null, i.a.createElement(h, { icon: m.E, $alarm: F.memory }), i.a.createElement(f, { $alarm: F.memory }, Object(p.a)(u.memoryUsageInBytes))), i.a.createElement(H, null, "of ", J)), i.a.createElement($, null, i.a.createElement(A, null, i.a.createElement(h, { icon: m.z, $alarm: F.disk }), i.a.createElement(f, { $alarm: F.disk }, Object(p.a)(u.diskUsageInBytes))), i.a.createElement(L, null, "of ", W)))), i.a.createElement("div", { className: "status-bar" })) })).withConfig({ displayName: "DashboardContainer___StyledServerRow", componentId: "sc-1topkxf-2" })(["", ""], (e => e.$_css)), Z = Object(c.c)("p").withConfig({ displayName: "DashboardContainer___StyledP2", componentId: "sc-1topkxf-3" })({ textAlign: "center", fontSize: "0.875rem", lineHeight: "1.25rem", "--tw-text-opacity": "1", color: "hsla(211, 10%, 53%, var(--tw-text-opacity))" }), ee = a(56), te = a(257), ae = a(258), ne = a(15), ie = a(282); t.default = () => { const e = Object(ne.h)(); return i.a.createElement(i.a.Fragment, null, i.a.createElement(o.a, null), e.pathname.startsWith("/account") && i.a.createElement(ae.a, null, i.a.createElement("div", null, ie.a.account.filter((e => !!e.name)).map((e => { let { path: t, name: a, exact: n = !1 } = e; return i.a.createElement(r.b, { key: t, to: "/account/".concat(t).replace("//", "/"), exact: n }, a) })))), i.a.createElement(te.a, null, i.a.createElement(i.a.Suspense, { fallback: i.a.createElement(y.a, { centered: !0 }) }, i.a.createElement(r.e, { location: e }, i.a.createElement(r.c, { path: "/", exact: !0 }, i.a.createElement(Q, null)), ie.a.account.map((e => { let { path: t, component: a } = e; return i.a.createElement(r.c, { key: t, path: "/account/".concat(t).replace("//", "/"), exact: !0 }, i.a.createElement(a, null)) })), i.a.createElement(r.c, { path: "*" }, i.a.createElement(ee.a, null)))))) } } }]);