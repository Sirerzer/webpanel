{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{232:function(e,t,a){\"use strict\";var r=a(17);t.a=async(e,t,a)=>{await r.a.post(\"/api/client/servers/\".concat(e,\"/files/write\"),a,{params:{file:t},headers:{\"Content-Type\":\"text/plain\"}})}},403:function(e,t,a){\"use strict\";a.r(t);var r=a(1),n=a(0),o=a.n(n),i=a(50),c=a(165),l=a(52),s=a(232),d=a(51),u=a(153),m=a(168);t.default=()=>{const[e,t]=Object(n.useState)(!1),[a,r]=Object(n.useState)(!1),l=i.a.useStoreState((e=>e.server.data.uuid)),d=i.a.useStoreState((e=>e.status.value)),{clearFlashes:_,clearAndAddHttpError:E}=Object(u.a)(),{connected:O,instance:S}=i.a.useStoreState((e=>e.socket));Object(n.useEffect)((()=>{if(!O||!S||\"running\"===d)return;const e=e=>{e.toLowerCase().indexOf(\"you need to agree to the eula in order to run the server\")>=0&&t(!0)};return S.addListener(m.a.CONSOLE_OUTPUT,e),()=>{S.removeListener(m.a.CONSOLE_OUTPUT,e)}}),[O,S,d]);return Object(n.useEffect)((()=>{_(\"feature:eula\")}),[]),o.a.createElement(c.b,{visible:e,onDismissed:()=>t(!1),closeOnBackground:!1,showSpinnerOverlay:a},o.a.createElement(p,{key:\"feature:eula\"}),o.a.createElement(w,null,\"Accept Minecraft® EULA\"),o.a.createElement(f,null,\"By pressing \",'\"I Accept\"',\" below you are indicating your agreement to the \",o.a.createElement(y,{target:\"_blank\",rel:\"noreferrer noopener\",href:\"https://www.minecraft.net/eula\"},\"Minecraft® EULA\"),\".\"),o.a.createElement(h,null,o.a.createElement(b,{isSecondary:!0,onClick:()=>t(!1)},\"Cancel\"),o.a.createElement(g,{onClick:()=>{r(!0),_(\"feature:eula\"),Object(s.a)(l,\"eula.txt\",\"eula=true\").then((()=>{\"offline\"===d&&S&&S.send(m.b.SET_STATE,\"restart\"),r(!1),t(!1)})).catch((e=>{console.error(e),E({key:\"feature:eula\",error:e})})).then((()=>r(!1)))}},\"I Accept\")))};var p=Object(r.c)(d.a).withConfig({displayName:\"EulaModalFeature___StyledFlashMessageRender\",componentId:\"sc-43378k-0\"})({marginBottom:\"1rem\"}),w=Object(r.c)(\"h2\").withConfig({displayName:\"EulaModalFeature___StyledH\",componentId:\"sc-43378k-1\"})({fontSize:\"1.5rem\",lineHeight:\"2rem\",marginBottom:\"1rem\",\"--tw-text-opacity\":\"1\",color:\"hsla(214, 15%, 91%, var(--tw-text-opacity))\"}),f=Object(r.c)(\"p\").withConfig({displayName:\"EulaModalFeature___StyledP\",componentId:\"sc-43378k-2\"})({\"--tw-text-opacity\":\"1\",color:\"hsla(210, 16%, 82%, var(--tw-text-opacity))\"}),y=Object(r.c)(\"a\").withConfig({displayName:\"EulaModalFeature___StyledA\",componentId:\"sc-43378k-3\"})({\"--tw-text-opacity\":\"1\",color:\"rgba(147, 197, 253, var(--tw-text-opacity))\",textDecoration:\"underline\",transitionProperty:\"background-color, border-color, color, fill, stroke\",transitionTimingFunction:\"cubic-bezier(0.4, 0, 0.2, 1)\",transitionDuration:\"150ms\",\":hover\":{\"--tw-text-opacity\":\"1\",color:\"rgba(96, 165, 250, var(--tw-text-opacity))\"}}),h=Object(r.c)(\"div\").withConfig({displayName:\"EulaModalFeature___StyledDiv\",componentId:\"sc-43378k-4\"})({marginTop:\"2rem\",alignItems:\"center\",justifyContent:\"flex-end\",\"@media (min-width: 640px)\":{display:\"flex\"}}),b=Object(r.c)(l.a).withConfig({displayName:\"EulaModalFeature___StyledButton\",componentId:\"sc-43378k-5\"})({width:\"100%\",borderColor:\"rgba(0, 0, 0, 0)\",\"@media (min-width: 640px)\":{width:\"auto\"}}),g=Object(r.c)(l.a).withConfig({displayName:\"EulaModalFeature___StyledButton2\",componentId:\"sc-43378k-6\"})({marginTop:\"1rem\",width:\"100%\",\"@media (min-width: 640px)\":{marginTop:\"0px\",marginLeft:\"1rem\",width:\"auto\"}})}}]);","name":"8.3c1c0a55.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[8],{\n\n/***/ 232:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _api_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (async (uuid, file, content) => {\n  await _api_http__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].post(\"/api/client/servers/\".concat(uuid, \"/files/write\"), content, {\n    params: {\n      file\n    },\n    headers: {\n      'Content-Type': 'text/plain'\n    }\n  });\n});\n\n/***/ }),\n\n/***/ 403:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _state_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50);\n/* harmony import */ var _components_elements_Modal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(165);\n/* harmony import */ var _components_elements_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52);\n/* harmony import */ var _api_server_files_saveFileContents__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(232);\n/* harmony import */ var _components_FlashMessageRender__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(51);\n/* harmony import */ var _plugins_useFlash__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(153);\n/* harmony import */ var _components_server_events__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(168);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst EulaModalFeature = () => {\n  const [visible, setVisible] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false);\n  const [loading, setLoading] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false);\n  const uuid = _state_server__WEBPACK_IMPORTED_MODULE_2__[/* ServerContext */ \"a\"].useStoreState(state => state.server.data.uuid);\n  const status = _state_server__WEBPACK_IMPORTED_MODULE_2__[/* ServerContext */ \"a\"].useStoreState(state => state.status.value);\n  const {\n    clearFlashes,\n    clearAndAddHttpError\n  } = Object(_plugins_useFlash__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])();\n  const {\n    connected,\n    instance\n  } = _state_server__WEBPACK_IMPORTED_MODULE_2__[/* ServerContext */ \"a\"].useStoreState(state => state.socket);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(() => {\n    if (!connected || !instance || status === 'running') return;\n\n    const listener = line => {\n      if (line.toLowerCase().indexOf('you need to agree to the eula in order to run the server') >= 0) {\n        setVisible(true);\n      }\n    };\n\n    instance.addListener(_components_server_events__WEBPACK_IMPORTED_MODULE_8__[/* SocketEvent */ \"a\"].CONSOLE_OUTPUT, listener);\n    return () => {\n      instance.removeListener(_components_server_events__WEBPACK_IMPORTED_MODULE_8__[/* SocketEvent */ \"a\"].CONSOLE_OUTPUT, listener);\n    };\n  }, [connected, instance, status]);\n\n  const onAcceptEULA = () => {\n    setLoading(true);\n    clearFlashes('feature:eula');\n    Object(_api_server_files_saveFileContents__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(uuid, 'eula.txt', 'eula=true').then(() => {\n      if (status === 'offline' && instance) {\n        instance.send(_components_server_events__WEBPACK_IMPORTED_MODULE_8__[/* SocketRequest */ \"b\"].SET_STATE, 'restart');\n      }\n\n      setLoading(false);\n      setVisible(false);\n    }).catch(error => {\n      console.error(error);\n      clearAndAddHttpError({\n        key: 'feature:eula',\n        error\n      });\n    }).then(() => setLoading(false));\n  };\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(() => {\n    clearFlashes('feature:eula');\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_elements_Modal__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"b\"], {\n    visible: visible,\n    onDismissed: () => setVisible(false),\n    closeOnBackground: false,\n    showSpinnerOverlay: loading\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledFlashMessageRender, {\n    key: 'feature:eula'\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledH, null, \"Accept Minecraft\\xAE EULA\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledP, null, \"By pressing \", '\"I Accept\"', \" below you are indicating your agreement to the\\xA0\", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledA, {\n    target: '_blank',\n    rel: 'noreferrer noopener',\n    href: \"https://www.minecraft.net/eula\"\n  }, \"Minecraft\\xAE EULA\"), \".\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledDiv, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledButton, {\n    isSecondary: true,\n    onClick: () => setVisible(false)\n  }, \"Cancel\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledButton2, {\n    onClick: onAcceptEULA\n  }, \"I Accept\")));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (EulaModalFeature);\n\nvar _StyledFlashMessageRender = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(_components_FlashMessageRender__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"]).withConfig({\n  displayName: \"EulaModalFeature___StyledFlashMessageRender\",\n  componentId: \"sc-43378k-0\"\n})({\n  \"marginBottom\": \"1rem\"\n});\n\nvar _StyledH = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"h2\").withConfig({\n  displayName: \"EulaModalFeature___StyledH\",\n  componentId: \"sc-43378k-1\"\n})({\n  \"fontSize\": \"1.5rem\",\n  \"lineHeight\": \"2rem\",\n  \"marginBottom\": \"1rem\",\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"hsla(214, 15%, 91%, var(--tw-text-opacity))\"\n});\n\nvar _StyledP = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"p\").withConfig({\n  displayName: \"EulaModalFeature___StyledP\",\n  componentId: \"sc-43378k-2\"\n})({\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"hsla(210, 16%, 82%, var(--tw-text-opacity))\"\n});\n\nvar _StyledA = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"a\").withConfig({\n  displayName: \"EulaModalFeature___StyledA\",\n  componentId: \"sc-43378k-3\"\n})({\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"rgba(147, 197, 253, var(--tw-text-opacity))\",\n  \"textDecoration\": \"underline\",\n  \"transitionProperty\": \"background-color, border-color, color, fill, stroke\",\n  \"transitionTimingFunction\": \"cubic-bezier(0.4, 0, 0.2, 1)\",\n  \"transitionDuration\": \"150ms\",\n  \":hover\": {\n    \"--tw-text-opacity\": \"1\",\n    \"color\": \"rgba(96, 165, 250, var(--tw-text-opacity))\"\n  }\n});\n\nvar _StyledDiv = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"div\").withConfig({\n  displayName: \"EulaModalFeature___StyledDiv\",\n  componentId: \"sc-43378k-4\"\n})({\n  \"marginTop\": \"2rem\",\n  \"alignItems\": \"center\",\n  \"justifyContent\": \"flex-end\",\n  \"@media (min-width: 640px)\": {\n    \"display\": \"flex\"\n  }\n});\n\nvar _StyledButton = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(_components_elements_Button__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"]).withConfig({\n  displayName: \"EulaModalFeature___StyledButton\",\n  componentId: \"sc-43378k-5\"\n})({\n  \"width\": \"100%\",\n  \"borderColor\": \"rgba(0, 0, 0, 0)\",\n  \"@media (min-width: 640px)\": {\n    \"width\": \"auto\"\n  }\n});\n\nvar _StyledButton2 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(_components_elements_Button__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"]).withConfig({\n  displayName: \"EulaModalFeature___StyledButton2\",\n  componentId: \"sc-43378k-6\"\n})({\n  \"marginTop\": \"1rem\",\n  \"width\": \"100%\",\n  \"@media (min-width: 640px)\": {\n    \"marginTop\": \"0px\",\n    \"marginLeft\": \"1rem\",\n    \"width\": \"auto\"\n  }\n});\n\n/***/ })\n\n}]);","inputSourceMap":null}