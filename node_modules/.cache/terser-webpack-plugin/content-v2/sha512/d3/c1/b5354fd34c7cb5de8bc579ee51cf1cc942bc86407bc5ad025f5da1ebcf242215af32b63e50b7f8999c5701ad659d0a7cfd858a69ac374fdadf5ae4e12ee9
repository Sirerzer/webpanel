{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{407:function(e,a,t){\"use strict\";t.r(a);var i=t(1),n=t(0),o=t.n(n),s=t(50),c=t(165),r=t(52),l=t(51),m=t(153),d=t(168),p=t(2);a.default=()=>{const[e,a]=Object(n.useState)(!1),[t]=Object(n.useState)(!1),i=s.a.useStoreState((e=>e.status.value)),{clearFlashes:r}=Object(m.a)(),{connected:l,instance:j}=s.a.useStoreState((e=>e.socket)),D=Object(p.useStoreState)((e=>e.user.data.rootAdmin));return Object(n.useEffect)((()=>{if(!l||!j||\"running\"===i)return;const e=[\"steamcmd needs 250mb of free disk space to update\",\"0x202 after update job\"],t=t=>{e.some((e=>t.toLowerCase().includes(e)))&&a(!0)};return j.addListener(d.a.CONSOLE_OUTPUT,t),()=>{j.removeListener(d.a.CONSOLE_OUTPUT,t)}}),[l,j,i]),Object(n.useEffect)((()=>{r(\"feature:steamDiskSpace\")}),[]),o.a.createElement(c.b,{visible:e,onDismissed:()=>a(!1),closeOnBackground:!1,showSpinnerOverlay:t},o.a.createElement(u,{key:\"feature:steamDiskSpace\"}),D?o.a.createElement(o.a.Fragment,null,o.a.createElement(h,null,o.a.createElement(S,null,\"Out of available disk space...\")),o.a.createElement(b,null,\"This server has run out of available disk space and cannot complete the install or update process.\"),o.a.createElement(g,null,\"Ensure the machine has enough disk space by typing\",\" \",o.a.createElement(f,null,\"df -h\"),\" on the machine hosting this server. Delete files or increase the available disk space to resolve the issue.\"),o.a.createElement(k,null,o.a.createElement(y,{onClick:()=>a(!1)},\"Close\"))):o.a.createElement(o.a.Fragment,null,o.a.createElement(_,null,o.a.createElement(w,null,\"Out of available disk space...\")),o.a.createElement(O,null,\"This server has run out of available disk space and cannot complete the install or update process. Please get in touch with the administrator(s) and inform them of disk space issues.\"),o.a.createElement(C,null,o.a.createElement(v,{onClick:()=>a(!1)},\"Close\"))))};var u=Object(i.c)(l.a).withConfig({displayName:\"SteamDiskSpaceFeature___StyledFlashMessageRender\",componentId:\"sc-1ak76ba-0\"})({marginBottom:\"1rem\"}),h=Object(i.c)(\"div\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledDiv\",componentId:\"sc-1ak76ba-1\"})({marginTop:\"1rem\",alignItems:\"center\",\"@media (min-width: 640px)\":{display:\"flex\"}}),S=Object(i.c)(\"h2\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledH\",componentId:\"sc-1ak76ba-2\"})({fontSize:\"1.5rem\",lineHeight:\"2rem\",marginBottom:\"1rem\",\"--tw-text-opacity\":\"1\",color:\"hsla(214, 15%, 91%, var(--tw-text-opacity))\"}),b=Object(i.c)(\"p\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledP\",componentId:\"sc-1ak76ba-3\"})({marginTop:\"1rem\"}),g=Object(i.c)(\"p\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledP2\",componentId:\"sc-1ak76ba-4\"})({marginTop:\"1rem\"}),f=Object(i.c)(\"code\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledCode\",componentId:\"sc-1ak76ba-5\"})({fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace',\"--tw-bg-opacity\":\"1\",backgroundColor:\"hsla(210, 24%, 16%, var(--tw-bg-opacity))\",borderRadius:\"0.25rem\",paddingTop:\"0.25rem\",paddingBottom:\"0.25rem\",paddingLeft:\"0.5rem\",paddingRight:\"0.5rem\"}),k=Object(i.c)(\"div\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledDiv2\",componentId:\"sc-1ak76ba-6\"})({marginTop:\"2rem\",alignItems:\"center\",justifyContent:\"flex-end\",\"@media (min-width: 640px)\":{display:\"flex\"}}),y=Object(i.c)(r.a).withConfig({displayName:\"SteamDiskSpaceFeature___StyledButton\",componentId:\"sc-1ak76ba-7\"})({width:\"100%\",borderColor:\"rgba(0, 0, 0, 0)\",\"@media (min-width: 640px)\":{width:\"auto\"}}),_=Object(i.c)(\"div\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledDiv3\",componentId:\"sc-1ak76ba-8\"})({marginTop:\"1rem\",alignItems:\"center\",\"@media (min-width: 640px)\":{display:\"flex\"}}),w=Object(i.c)(\"h2\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledH2\",componentId:\"sc-1ak76ba-9\"})({fontSize:\"1.5rem\",lineHeight:\"2rem\",marginBottom:\"1rem\",\"--tw-text-opacity\":\"1\",color:\"hsla(214, 15%, 91%, var(--tw-text-opacity))\"}),O=Object(i.c)(\"p\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledP3\",componentId:\"sc-1ak76ba-10\"})({marginTop:\"1rem\"}),C=Object(i.c)(\"div\").withConfig({displayName:\"SteamDiskSpaceFeature___StyledDiv4\",componentId:\"sc-1ak76ba-11\"})({marginTop:\"2rem\",alignItems:\"center\",justifyContent:\"flex-end\",\"@media (min-width: 640px)\":{display:\"flex\"}}),v=Object(i.c)(r.a).withConfig({displayName:\"SteamDiskSpaceFeature___StyledButton2\",componentId:\"sc-1ak76ba-12\"})({width:\"100%\",borderColor:\"rgba(0, 0, 0, 0)\",\"@media (min-width: 640px)\":{width:\"auto\"}})}}]);","name":"13.8532b0e9.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[13],{\n\n/***/ 407:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _state_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50);\n/* harmony import */ var _components_elements_Modal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(165);\n/* harmony import */ var _components_elements_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52);\n/* harmony import */ var _components_FlashMessageRender__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(51);\n/* harmony import */ var _plugins_useFlash__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(153);\n/* harmony import */ var _components_server_events__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(168);\n/* harmony import */ var easy_peasy__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2);\n/* harmony import */ var easy_peasy__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(easy_peasy__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst SteamDiskSpaceFeature = () => {\n  const [visible, setVisible] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false);\n  const [loading] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false);\n  const status = _state_server__WEBPACK_IMPORTED_MODULE_2__[/* ServerContext */ \"a\"].useStoreState(state => state.status.value);\n  const {\n    clearFlashes\n  } = Object(_plugins_useFlash__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])();\n  const {\n    connected,\n    instance\n  } = _state_server__WEBPACK_IMPORTED_MODULE_2__[/* ServerContext */ \"a\"].useStoreState(state => state.socket);\n  const isAdmin = Object(easy_peasy__WEBPACK_IMPORTED_MODULE_8__[\"useStoreState\"])(state => state.user.data.rootAdmin);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(() => {\n    if (!connected || !instance || status === 'running') return;\n    const errors = ['steamcmd needs 250mb of free disk space to update', '0x202 after update job'];\n\n    const listener = line => {\n      if (errors.some(p => line.toLowerCase().includes(p))) {\n        setVisible(true);\n      }\n    };\n\n    instance.addListener(_components_server_events__WEBPACK_IMPORTED_MODULE_7__[/* SocketEvent */ \"a\"].CONSOLE_OUTPUT, listener);\n    return () => {\n      instance.removeListener(_components_server_events__WEBPACK_IMPORTED_MODULE_7__[/* SocketEvent */ \"a\"].CONSOLE_OUTPUT, listener);\n    };\n  }, [connected, instance, status]);\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(() => {\n    clearFlashes('feature:steamDiskSpace');\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_elements_Modal__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"b\"], {\n    visible: visible,\n    onDismissed: () => setVisible(false),\n    closeOnBackground: false,\n    showSpinnerOverlay: loading\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledFlashMessageRender, {\n    key: 'feature:steamDiskSpace'\n  }), isAdmin ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledDiv, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledH, null, \"Out of available disk space...\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledP, null, \"This server has run out of available disk space and cannot complete the install or update process.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledP2, null, \"Ensure the machine has enough disk space by typing\", ' ', /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledCode, null, \"df -h\"), \" on the machine hosting this server. Delete files or increase the available disk space to resolve the issue.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledDiv2, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledButton, {\n    onClick: () => setVisible(false)\n  }, \"Close\"))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledDiv3, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledH2, null, \"Out of available disk space...\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledP3, null, \"This server has run out of available disk space and cannot complete the install or update process. Please get in touch with the administrator(s) and inform them of disk space issues.\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledDiv4, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledButton2, {\n    onClick: () => setVisible(false)\n  }, \"Close\"))));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (SteamDiskSpaceFeature);\n\nvar _StyledFlashMessageRender = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(_components_FlashMessageRender__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"]).withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledFlashMessageRender\",\n  componentId: \"sc-1ak76ba-0\"\n})({\n  \"marginBottom\": \"1rem\"\n});\n\nvar _StyledDiv = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"div\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledDiv\",\n  componentId: \"sc-1ak76ba-1\"\n})({\n  \"marginTop\": \"1rem\",\n  \"alignItems\": \"center\",\n  \"@media (min-width: 640px)\": {\n    \"display\": \"flex\"\n  }\n});\n\nvar _StyledH = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"h2\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledH\",\n  componentId: \"sc-1ak76ba-2\"\n})({\n  \"fontSize\": \"1.5rem\",\n  \"lineHeight\": \"2rem\",\n  \"marginBottom\": \"1rem\",\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"hsla(214, 15%, 91%, var(--tw-text-opacity))\"\n});\n\nvar _StyledP = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"p\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledP\",\n  componentId: \"sc-1ak76ba-3\"\n})({\n  \"marginTop\": \"1rem\"\n});\n\nvar _StyledP2 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"p\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledP2\",\n  componentId: \"sc-1ak76ba-4\"\n})({\n  \"marginTop\": \"1rem\"\n});\n\nvar _StyledCode = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"code\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledCode\",\n  componentId: \"sc-1ak76ba-5\"\n})({\n  \"fontFamily\": \"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \\\"Liberation Mono\\\", \\\"Courier New\\\", monospace\",\n  \"--tw-bg-opacity\": \"1\",\n  \"backgroundColor\": \"hsla(210, 24%, 16%, var(--tw-bg-opacity))\",\n  \"borderRadius\": \"0.25rem\",\n  \"paddingTop\": \"0.25rem\",\n  \"paddingBottom\": \"0.25rem\",\n  \"paddingLeft\": \"0.5rem\",\n  \"paddingRight\": \"0.5rem\"\n});\n\nvar _StyledDiv2 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"div\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledDiv2\",\n  componentId: \"sc-1ak76ba-6\"\n})({\n  \"marginTop\": \"2rem\",\n  \"alignItems\": \"center\",\n  \"justifyContent\": \"flex-end\",\n  \"@media (min-width: 640px)\": {\n    \"display\": \"flex\"\n  }\n});\n\nvar _StyledButton = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(_components_elements_Button__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"]).withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledButton\",\n  componentId: \"sc-1ak76ba-7\"\n})({\n  \"width\": \"100%\",\n  \"borderColor\": \"rgba(0, 0, 0, 0)\",\n  \"@media (min-width: 640px)\": {\n    \"width\": \"auto\"\n  }\n});\n\nvar _StyledDiv3 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"div\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledDiv3\",\n  componentId: \"sc-1ak76ba-8\"\n})({\n  \"marginTop\": \"1rem\",\n  \"alignItems\": \"center\",\n  \"@media (min-width: 640px)\": {\n    \"display\": \"flex\"\n  }\n});\n\nvar _StyledH2 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"h2\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledH2\",\n  componentId: \"sc-1ak76ba-9\"\n})({\n  \"fontSize\": \"1.5rem\",\n  \"lineHeight\": \"2rem\",\n  \"marginBottom\": \"1rem\",\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"hsla(214, 15%, 91%, var(--tw-text-opacity))\"\n});\n\nvar _StyledP3 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"p\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledP3\",\n  componentId: \"sc-1ak76ba-10\"\n})({\n  \"marginTop\": \"1rem\"\n});\n\nvar _StyledDiv4 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"div\").withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledDiv4\",\n  componentId: \"sc-1ak76ba-11\"\n})({\n  \"marginTop\": \"2rem\",\n  \"alignItems\": \"center\",\n  \"justifyContent\": \"flex-end\",\n  \"@media (min-width: 640px)\": {\n    \"display\": \"flex\"\n  }\n});\n\nvar _StyledButton2 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(_components_elements_Button__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"]).withConfig({\n  displayName: \"SteamDiskSpaceFeature___StyledButton2\",\n  componentId: \"sc-1ak76ba-12\"\n})({\n  \"width\": \"100%\",\n  \"borderColor\": \"rgba(0, 0, 0, 0)\",\n  \"@media (min-width: 640px)\": {\n    \"width\": \"auto\"\n  }\n});\n\n/***/ })\n\n}]);","inputSourceMap":null}