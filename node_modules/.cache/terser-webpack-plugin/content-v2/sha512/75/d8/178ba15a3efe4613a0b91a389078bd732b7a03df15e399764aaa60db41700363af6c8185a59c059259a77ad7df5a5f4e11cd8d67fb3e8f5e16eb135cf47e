{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{404:function(e,a,t){\"use strict\";t.r(a);var r=t(1),n=t(0),o=t.n(n),i=t(50),s=t(165),c=t(52),l=t(263),d=t(51),m=t(153),u=t(168),p=t(186),v=t(187),h=t(156),g=t(228),w=t(194);const b=[\"minecraft 1.17 requires running the server with java 16 or above\",\"minecraft 1.18 requires running the server with java 17 or above\",\"java.lang.unsupportedclassversionerror\",\"unsupported major.minor version\",\"has been compiled by a more recent version of the java runtime\"];a.default=()=>{const[e,a]=Object(n.useState)(!1),[t,r]=Object(n.useState)(!1),[c,d]=Object(n.useState)(\"\"),k=i.a.useStoreState((e=>e.server.data.uuid)),C=i.a.useStoreState((e=>e.status.value)),{clearFlashes:x,clearAndAddHttpError:V}=Object(m.a)(),{instance:I}=i.a.useStoreState((e=>e.socket)),{data:J,isValidating:T,mutate:F}=Object(g.a)(k,null,{revalidateOnMount:!1});Object(n.useEffect)((()=>{e&&F().then((e=>{d(Object.values((null==e?void 0:e.dockerImages)||[])[0]||\"\")}))}),[e]),Object(v.a)(u.a.CONSOLE_OUTPUT,(e=>{\"running\"!==C&&b.some((a=>e.toLowerCase().includes(a.toLowerCase())))&&a(!0)}));return Object(n.useEffect)((()=>{x(\"feature:javaVersion\")}),[]),o.a.createElement(s.b,{visible:e,onDismissed:()=>a(!1),closeOnBackground:!1,showSpinnerOverlay:t},o.a.createElement(y,{key:\"feature:javaVersion\"}),o.a.createElement(f,null,\"Unsupported Java Version\"),o.a.createElement(j,null,\"This server is currently running an unsupported version of Java and cannot be started.\",o.a.createElement(h.a,{action:\"startup.docker-image\"},\"Â Please select a supported version from the list below to continue starting the server.\")),o.a.createElement(h.a,{action:\"startup.docker-image\"},o.a.createElement(O,null,o.a.createElement(w.a,{visible:!J||T},o.a.createElement(p.a,{disabled:!J,onChange:e=>d(e.target.value)},J?Object.keys(J.dockerImages).map((e=>o.a.createElement(\"option\",{key:e,value:J.dockerImages[e]},e))):o.a.createElement(\"option\",{disabled:!0}))))),o.a.createElement(_,null,o.a.createElement(S,{isSecondary:!0,onClick:()=>a(!1)},\"Cancel\"),o.a.createElement(h.a,{action:\"startup.docker-image\"},o.a.createElement(E,{onClick:()=>{r(!0),x(\"feature:javaVersion\"),Object(l.a)(k,c).then((()=>{\"offline\"===C&&I&&I.send(u.b.SET_STATE,\"restart\"),a(!1)})).catch((e=>V({key:\"feature:javaVersion\",error:e}))).then((()=>r(!1)))}},\"Update Docker Image\"))))};var y=Object(r.c)(d.a).withConfig({displayName:\"JavaVersionModalFeature___StyledFlashMessageRender\",componentId:\"sc-15l9se1-0\"})({marginBottom:\"1rem\"}),f=Object(r.c)(\"h2\").withConfig({displayName:\"JavaVersionModalFeature___StyledH\",componentId:\"sc-15l9se1-1\"})({fontSize:\"1.5rem\",lineHeight:\"2rem\",marginBottom:\"1rem\",\"--tw-text-opacity\":\"1\",color:\"hsla(214, 15%, 91%, var(--tw-text-opacity))\"}),j=Object(r.c)(\"p\").withConfig({displayName:\"JavaVersionModalFeature___StyledP\",componentId:\"sc-15l9se1-2\"})({marginTop:\"1rem\"}),O=Object(r.c)(\"div\").withConfig({displayName:\"JavaVersionModalFeature___StyledDiv\",componentId:\"sc-15l9se1-3\"})({marginTop:\"1rem\"}),_=Object(r.c)(\"div\").withConfig({displayName:\"JavaVersionModalFeature___StyledDiv2\",componentId:\"sc-15l9se1-4\"})({marginTop:\"2rem\",display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-end\",\"> :not([hidden]) ~ :not([hidden])\":{\"--tw-space-y-reverse\":0,marginTop:\"calc(1rem * calc(1 - var(--tw-space-y-reverse)))\",marginBottom:\"calc(1rem * var(--tw-space-y-reverse))\"},\"@media (min-width: 640px)\":{flexDirection:\"row\",\"> :not([hidden]) ~ :not([hidden])\":{\"--tw-space-x-reverse\":0,marginRight:\"calc(1rem * var(--tw-space-x-reverse))\",marginLeft:\"calc(1rem * calc(1 - var(--tw-space-x-reverse)))\",\"--tw-space-y-reverse\":0,marginTop:\"calc(0px * calc(1 - var(--tw-space-y-reverse)))\",marginBottom:\"calc(0px * var(--tw-space-y-reverse))\"}}}),S=Object(r.c)(c.a).withConfig({displayName:\"JavaVersionModalFeature___StyledButton\",componentId:\"sc-15l9se1-5\"})({width:\"100%\",\"@media (min-width: 640px)\":{width:\"auto\"}}),E=Object(r.c)(c.a).withConfig({displayName:\"JavaVersionModalFeature___StyledButton2\",componentId:\"sc-15l9se1-6\"})({width:\"100%\",\"@media (min-width: 640px)\":{width:\"auto\"}})}}]);","name":"11.2aa1f5c4.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[11],{\n\n/***/ 404:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _state_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50);\n/* harmony import */ var _components_elements_Modal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(165);\n/* harmony import */ var _components_elements_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52);\n/* harmony import */ var _api_server_setSelectedDockerImage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(263);\n/* harmony import */ var _components_FlashMessageRender__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(51);\n/* harmony import */ var _plugins_useFlash__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(153);\n/* harmony import */ var _components_server_events__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(168);\n/* harmony import */ var _components_elements_Select__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(186);\n/* harmony import */ var _plugins_useWebsocketEvent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(187);\n/* harmony import */ var _components_elements_Can__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(156);\n/* harmony import */ var _api_swr_getServerStartup__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(228);\n/* harmony import */ var _components_elements_InputSpinner__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(194);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst MATCH_ERRORS = ['minecraft 1.17 requires running the server with java 16 or above', 'minecraft 1.18 requires running the server with java 17 or above', 'java.lang.unsupportedclassversionerror', 'unsupported major.minor version', 'has been compiled by a more recent version of the java runtime'];\n\nconst JavaVersionModalFeature = () => {\n  const [visible, setVisible] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false);\n  const [loading, setLoading] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(false);\n  const [selectedVersion, setSelectedVersion] = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])('');\n  const uuid = _state_server__WEBPACK_IMPORTED_MODULE_2__[/* ServerContext */ \"a\"].useStoreState(state => state.server.data.uuid);\n  const status = _state_server__WEBPACK_IMPORTED_MODULE_2__[/* ServerContext */ \"a\"].useStoreState(state => state.status.value);\n  const {\n    clearFlashes,\n    clearAndAddHttpError\n  } = Object(_plugins_useFlash__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])();\n  const {\n    instance\n  } = _state_server__WEBPACK_IMPORTED_MODULE_2__[/* ServerContext */ \"a\"].useStoreState(state => state.socket);\n  const {\n    data,\n    isValidating,\n    mutate\n  } = Object(_api_swr_getServerStartup__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"])(uuid, null, {\n    revalidateOnMount: false\n  });\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(() => {\n    if (!visible) return;\n    mutate().then(value => {\n      setSelectedVersion(Object.values((value === null || value === void 0 ? void 0 : value.dockerImages) || [])[0] || '');\n    });\n  }, [visible]);\n  Object(_plugins_useWebsocketEvent__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"])(_components_server_events__WEBPACK_IMPORTED_MODULE_8__[/* SocketEvent */ \"a\"].CONSOLE_OUTPUT, data => {\n    if (status === 'running') return;\n\n    if (MATCH_ERRORS.some(p => data.toLowerCase().includes(p.toLowerCase()))) {\n      setVisible(true);\n    }\n  });\n\n  const updateJava = () => {\n    setLoading(true);\n    clearFlashes('feature:javaVersion');\n    Object(_api_server_setSelectedDockerImage__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(uuid, selectedVersion).then(() => {\n      if (status === 'offline' && instance) {\n        instance.send(_components_server_events__WEBPACK_IMPORTED_MODULE_8__[/* SocketRequest */ \"b\"].SET_STATE, 'restart');\n      }\n\n      setVisible(false);\n    }).catch(error => clearAndAddHttpError({\n      key: 'feature:javaVersion',\n      error\n    })).then(() => setLoading(false));\n  };\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(() => {\n    clearFlashes('feature:javaVersion');\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_elements_Modal__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"b\"], {\n    visible: visible,\n    onDismissed: () => setVisible(false),\n    closeOnBackground: false,\n    showSpinnerOverlay: loading\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledFlashMessageRender, {\n    key: 'feature:javaVersion'\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledH, null, \"Unsupported Java Version\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledP, null, \"This server is currently running an unsupported version of Java and cannot be started.\", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_elements_Can__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"], {\n    action: 'startup.docker-image'\n  }, \"\\xA0Please select a supported version from the list below to continue starting the server.\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_elements_Can__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"], {\n    action: 'startup.docker-image'\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledDiv, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_elements_InputSpinner__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"], {\n    visible: !data || isValidating\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_elements_Select__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"], {\n    disabled: !data,\n    onChange: e => setSelectedVersion(e.target.value)\n  }, !data ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"option\", {\n    disabled: true\n  }) : Object.keys(data.dockerImages).map(key => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"option\", {\n    key: key,\n    value: data.dockerImages[key]\n  }, key)))))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledDiv2, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledButton, {\n    isSecondary: true,\n    onClick: () => setVisible(false)\n  }, \"Cancel\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_components_elements_Can__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"], {\n    action: 'startup.docker-image'\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_StyledButton2, {\n    onClick: updateJava\n  }, \"Update Docker Image\"))));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (JavaVersionModalFeature);\n\nvar _StyledFlashMessageRender = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(_components_FlashMessageRender__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"]).withConfig({\n  displayName: \"JavaVersionModalFeature___StyledFlashMessageRender\",\n  componentId: \"sc-15l9se1-0\"\n})({\n  \"marginBottom\": \"1rem\"\n});\n\nvar _StyledH = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"h2\").withConfig({\n  displayName: \"JavaVersionModalFeature___StyledH\",\n  componentId: \"sc-15l9se1-1\"\n})({\n  \"fontSize\": \"1.5rem\",\n  \"lineHeight\": \"2rem\",\n  \"marginBottom\": \"1rem\",\n  \"--tw-text-opacity\": \"1\",\n  \"color\": \"hsla(214, 15%, 91%, var(--tw-text-opacity))\"\n});\n\nvar _StyledP = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"p\").withConfig({\n  displayName: \"JavaVersionModalFeature___StyledP\",\n  componentId: \"sc-15l9se1-2\"\n})({\n  \"marginTop\": \"1rem\"\n});\n\nvar _StyledDiv = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"div\").withConfig({\n  displayName: \"JavaVersionModalFeature___StyledDiv\",\n  componentId: \"sc-15l9se1-3\"\n})({\n  \"marginTop\": \"1rem\"\n});\n\nvar _StyledDiv2 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(\"div\").withConfig({\n  displayName: \"JavaVersionModalFeature___StyledDiv2\",\n  componentId: \"sc-15l9se1-4\"\n})({\n  \"marginTop\": \"2rem\",\n  \"display\": \"flex\",\n  \"flexDirection\": \"column\",\n  \"justifyContent\": \"flex-end\",\n  \"> :not([hidden]) ~ :not([hidden])\": {\n    \"--tw-space-y-reverse\": 0,\n    \"marginTop\": \"calc(1rem * calc(1 - var(--tw-space-y-reverse)))\",\n    \"marginBottom\": \"calc(1rem * var(--tw-space-y-reverse))\"\n  },\n  \"@media (min-width: 640px)\": {\n    \"flexDirection\": \"row\",\n    \"> :not([hidden]) ~ :not([hidden])\": {\n      \"--tw-space-x-reverse\": 0,\n      \"marginRight\": \"calc(1rem * var(--tw-space-x-reverse))\",\n      \"marginLeft\": \"calc(1rem * calc(1 - var(--tw-space-x-reverse)))\",\n      \"--tw-space-y-reverse\": 0,\n      \"marginTop\": \"calc(0px * calc(1 - var(--tw-space-y-reverse)))\",\n      \"marginBottom\": \"calc(0px * var(--tw-space-y-reverse))\"\n    }\n  }\n});\n\nvar _StyledButton = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(_components_elements_Button__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"]).withConfig({\n  displayName: \"JavaVersionModalFeature___StyledButton\",\n  componentId: \"sc-15l9se1-5\"\n})({\n  \"width\": \"100%\",\n  \"@media (min-width: 640px)\": {\n    \"width\": \"auto\"\n  }\n});\n\nvar _StyledButton2 = Object(styled_components__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"c\"])(_components_elements_Button__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"]).withConfig({\n  displayName: \"JavaVersionModalFeature___StyledButton2\",\n  componentId: \"sc-15l9se1-6\"\n})({\n  \"width\": \"100%\",\n  \"@media (min-width: 640px)\": {\n    \"width\": \"auto\"\n  }\n});\n\n/***/ })\n\n}]);","inputSourceMap":null}